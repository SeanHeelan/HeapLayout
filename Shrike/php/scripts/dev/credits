#!/bin/sh
awkprog='
BEGIN { FS = "\n|\r\n|\r"; RS = "" }
{ print "CREDIT_LINE(\""$1"\", \""$2"\");" }'

for what in ext sapi
do
  file=ext/standard/credits_$what.h
  cat >$file <<END
/* 
                      DO NOT EDIT THIS FILE!

 it has been automaticaly created by php7/scripts/credits from  
 the information found in the various php7/ext/.../CREDITS and
 php7/sapi/.../CREDITS files 
 
 if you want to change an entry you have to edit the appropriate 
 CREDITS file instead

*/

END
  # Do not process skeleton #
  files=`find "$what" -name CREDITS | grep -v "$what"/skeleton/CREDITS`
  awk "$awkprog" $files | sort -f | uniq >> $file
  echo "Updated $file"
done
